# Лабораторная работа №2 — Класс Money

- **Студент**: Фимина Анастасия
- **Группа**: М8О-209БВ-24

## Тема
Изучение базовых приёмов работы с классами.

## Цель
1. Закрепление навыков работы с классами.
2. Закрепление навыков работы с динамической памятью на «куче».
3. Закрепление навыков работы с массивами.


## Описание
Реализован класс `Money` для работы с денежными суммами в рублях и копейках с фиксированной точностью 2 знака после десятичной точки. Класс поддерживает:
- **Парсинг** из строкового представления ("123.45", "100", "50.5" → "50.50")
- **Форматированный вывод** в строку `rubles.kopecks` (строго 2 знака копеек)
- **Арифметические операции**: сложение и вычитание
- **Сравнения**: `==`, `!=`, `<`, `<=`, `>`, `>=`
- **Обработку ошибок** через исключения

Внутреннее представление — массив десятичных цифр в обратном порядке (младшие разряды первыми), с нормализацией ведущих нулей. Младшие две цифры — копейки.

## Формальные требования к программе (по заданию)
Используя в качестве образца класс `Array` (динамический массив), реализовать динамический контейнер:
- Каждый класс разделён на интерфейс и реализацию.
- Самостоятельно определить необходимые типы, поля и дополнительные методы.
- Реализовать генерацию исключений в конструкторах и методах при необходимости (стандартные исключения).
- Реализовать арифметические операции: сложение, вычитание, копирование.
- Реализовать операции сравнения: больше, меньше, равно.
- Арифметические операции с присваиванием должны быть реализованы как методы класса.
- Перегрузку операторов применять не нужно.
- Объекты классов должны быть иммутабельными (не изменяются после создания), результаты методов возвращаются как новый экземпляр объекта.
- Представление суммы: массив `unsigned char`, каждый элемент — десятичная цифра; младший индекс — младшая цифра; младшие две цифры — копейки. (вариант 12)


## Функциональность
- **Конструкторы**:
  - `Money()` → `0.00`
  - `explicit Money(const std::string& str)` — парсит строку вида `RRR.KK` (0–2 знака копеек)
  - Копирующий конструктор и оператор присваивания
- **Арифметика**:
  - `Money operator+(const Money& other) const`
  - `Money operator-(const Money& other) const` — выбрасывает `NegativeResultException`, если результат отрицателен
- **Сравнения**: `==`, `!=`, `<`, `<=`, `>`, `>=`
- **Преобразование**:
  - `std::string toString() const` — всегда возвращает формат `rubles.kopecks`
- **Исключения**:
  - `InvalidMoneyException` — ошибки формата входной строки (посторонние символы, >2 знаков копеек и т.п.)
  - `NegativeResultException` — попытка получить отрицательный результат вычитания

## Алгоритм
- Парсинг делит строку на рубли и копейки; копейки дополняются до 2 знаков.
- Все символы должны быть цифрами; иное приводит к `InvalidMoneyException`.
- Внутреннее хранение — массив цифр в обратном порядке; операции выполняются поразрядно с переносами/занятиями.
- Нормализация удаляет ведущие нули старших разрядов, сохраняя минимум один ноль.

## Структура проекта
```
lab-02/
├── CMakeLists.txt          # Конфигурация сборки корня
├── README.md               # Этот файл
├── Money.h                 # Интерфейс класса Money
├── Money.cpp               # Реализация класса Money
├── main.cpp                # Пример использования (исполняемый файл main_example)
└── tests/
    ├── CMakeLists.txt      # Конфигурация тестов
    └── money_test.cpp      # Модульные тесты GoogleTest
```

## Требования к окружению
- **C++17** или выше
- **CMake 3.14** или выше
- **GoogleTest** (для тестов)
- Компилятор с поддержкой C++17

## Сборка
В корне проекта выполните:
```bash
mkdir build
cd build
cmake ..
make
```
Будут собраны:
- библиотека `MoneyLib`
- пример `main_example`
- тесты `MoneyTests`

## Запуск
Из каталога `build/`:
```bash
./main_example
```
Пример выводит результаты операций над предопределёнными значениями ("123.45" и "67.89").

Пример ожидаемого вывода:
```text
m1 = 123.45
m2 = 67.89
Sum = 191.34
Diff = 55.56
m1 is greater than m2
```

## Тестирование
Сборка тестов выполняется вместе с проектом. Запустить можно так:
```bash
cd build
ctest --output-on-failure
# или непосредственно бинарник тестов
./tests/MoneyTests
```


## Примеры использования
```cpp
#include "Money.h"

Money a("10.50");
Money b("20.60");
Money c = a + b;          // 31.10
Money d = b - a;          // 10.10
bool cmp = c > d;         // true
std::string s = c.toString(); // "31.10"
```
Обработка ошибок:
```cpp
try {
  Money x("10.123"); // бросит InvalidMoneyException
} catch (const Money::InvalidMoneyException& e) { /* ... */ }

try {
  Money m1("10.00"), m2("20.00");
  auto r = m1 - m2; // бросит NegativeResultException
} catch (const Money::NegativeResultException& e) { /* ... */ }
```


## Примечания
- Копейки всегда выводятся двумя цифрами.
- Десятичный разделитель — точка `.`.
- Входные строки не поддерживают знаки (+/−) и разделители разрядов; только цифры и, опционально, одна точка.
