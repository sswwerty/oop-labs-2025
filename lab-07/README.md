# Лабораторная работа №07: Асинхронное программирование

## Описание

Модификация лабораторной работы №06 с добавлением асинхронного программирования и многопоточности.

## Требования

- C++17 или выше
- CMake 3.14 или выше

## Сборка

```bash
mkdir build
cd build
cmake ..
make
```

## Запуск

```bash
./build/src/lab07
```

## Функциональность

### Три потока:

1. **Поток передвижения NPC** (`movementThread`):
   - Перемещает живых NPC на определенное расстояние согласно их типу
   - Определяет, когда два NPC находятся на расстоянии убийства
   - Создает задачи для потока боев

2. **Поток боев** (`battleThread`):
   - Обрабатывает бои между NPC
   - Использует 6-гранный кубик для определения силы атаки и защиты
   - Если сила атаки больше силы защиты, происходит убийство

3. **Основной поток вывода** (`printThread`):
   - Каждую секунду выводит карту с живыми NPC
   - Мертвые NPC не отображаются

### Особенности:

- **50 NPC** создаются в случайных локациях в начале игры
- Игра длится **30 секунд**
- После окончания выводится список выживших
- Мертвые NPC не передвигаются
- Живые NPC не могут покинуть карту (100x100)
- Используется `std::shared_lock` для чтения позиций NPC
- Используется `std::lock_guard` для синхронизации вывода в `std::cout`

### Типы NPC:

- ORC (Орк)
- SQUIRREL (Белка)
- DRUID (Друид)
- ELF (Эльф)
- DRAGON (Дракон)
- BEAR (Медведь)
- BANDIT (Разбойник)
- WEREWOLF (Оборотень)
- PRINCESS (Принцесса)
- TOAD (Жаба)
- SLAVER (Работорговец)
- PEGASUS (Пегас)
- BITTERN (Выпь)
- DESMAN (Выхухоль)
- BULL (Бык)
- KNIGHT (Странствующий рыцарь)

Каждый тип NPC имеет:
- Свое расстояние хода
- Свое расстояние убийства
- Таблицу убиваемости (кто может убивать кого)

## Структура проекта

```
lab-07/
├── CMakeLists.txt
├── README.md
├── include/
│   ├── NPC.hpp
│   ├── Factories.hpp
│   ├── Visitor.hpp
│   └── Dungeon.hpp
└── src/
    ├── CMakeLists.txt
    ├── main.cpp
    ├── NPC.cpp
    ├── Factories.cpp
    ├── Visitor.cpp
    └── Dungeon.cpp
```

## Синхронизация

- `std::shared_mutex` используется для чтения позиций NPC (множественные читатели)
- `std::lock_guard` используется для записи позиций и вывода в консоль
- `std::atomic<bool>` используется для флага работы игры
- `std::mutex` используется для очереди боев

